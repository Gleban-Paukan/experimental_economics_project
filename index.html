<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∏–ª–µ–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑–¥–µ—Ä–∂–µ–∫</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .game-container {
            max-width: 900px;
            margin: 20px auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 40px;
        }
        .screen { display: none; }
        .screen.active { display: block; }
        .player-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
        }
        .player-card.ready { border-left-color: #28a745; }
        .player-card.offline { border-left-color: #dc3545; opacity: 0.6; }
        .room-code {
            font-size: 2.5rem;
            font-weight: bold;
            color: #667eea;
            letter-spacing: 0.3rem;
            user-select: all;
        }
        .btn-primary { background: #667eea; border: none; }
        .btn-primary:hover { background: #5568d3; }
        .slider-container { margin: 30px 0; }
        .contribution-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }
        .result-success { background: #d4edda; border-left: 4px solid #28a745; }
        .result-fail { background: #f8d7da; border-left: 4px solid #dc3545; }
        .debug-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 0.85rem;
            max-height: 200px;
            overflow-y: auto;
            display: none;
        }
    </style>
</head>
<body>

<div class="game-container">
    <!-- –≠–∫—Ä–∞–Ω 1: –ì–ª–∞–≤–Ω–∞—è -->
    <div id="homeScreen" class="screen active">
        <h1 class="text-center mb-4">üéÆ –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç</h1>
        <h5 class="text-center text-muted mb-4">–î–∏–ª–µ–º–º–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–∑–¥–µ—Ä–∂–µ–∫</h5>
        
        <div class="mb-4">
            <label class="form-label">–í–∞—à–µ –∏–º—è:</label>
            <input type="text" id="playerName" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è" maxlength="20">
        </div>
        
        <div class="d-grid gap-3">
            <button class="btn btn-primary btn-lg" onclick="createRoom()">
                üè† –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É
            </button>
            <div class="text-center my-2">–∏–ª–∏</div>
            <div class="input-group">
                <input type="text" id="joinRoomCode" class="form-control" placeholder="–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã" maxlength="6">
                <button class="btn btn-success" onclick="joinRoom()">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
            </div>
        </div>
        
        <div class="alert alert-info mt-4">
            <strong>–ü—Ä–∞–≤–∏–ª–∞:</strong> 4 –∏–≥—Ä–æ–∫–∞, 5 —Ä–∞—É–Ω–¥–æ–≤. –ì—Ä—É–ø–ø–∞ —Å–æ–∑–¥–∞—ë—Ç –æ–±—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –±–ª–∞–≥–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç–∏ (60-140). 
            –ï—Å–ª–∏ —Å—É–º–º–∞ –≤–∑–Ω–æ—Å–æ–≤ ‚â• —Å—Ç–æ–∏–º–æ—Å—Ç–∏ ‚Üí –∫–∞–∂–¥—ã–π –ø–æ–ª—É—á–∞–µ—Ç 50 –º–æ–Ω–µ—Ç. –ò–Ω–∞—á–µ –≤–∑–Ω–æ—Å—ã —Ç–µ—Ä—è—é—Ç—Å—è.
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 2: –õ–æ–±–±–∏ -->
    <div id="lobbyScreen" class="screen">
        <h2 class="text-center mb-4">–ö–æ–º–Ω–∞—Ç–∞</h2>
        <div class="text-center mb-4">
            <div class="room-code" id="displayRoomCode">------</div>
            <button class="btn btn-sm btn-outline-secondary" onclick="copyRoomCode()">üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥</button>
        </div>
        
        <h5>–ò–≥—Ä–æ–∫–∏ –≤ –∫–æ–º–Ω–∞—Ç–µ (<span id="playerCount">0</span>/4):</h5>
        <div id="playersList"></div>
        
        <div class="d-grid gap-2 mt-4">
            <button class="btn btn-success btn-lg" id="readyBtn" onclick="markReady()">–Ø –≥–æ—Ç–æ–≤!</button>
            <button class="btn btn-outline-danger" onclick="leaveRoom()">–ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
        </div>
        
        <div class="alert alert-warning mt-3" id="waitingMessage">
            –û–∂–∏–¥–∞–µ–º, –ø–æ–∫–∞ –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –±—É–¥—É—Ç –≥–æ—Ç–æ–≤—ã...
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 3: –†–∞—É–Ω–¥ (–ø—Ä–æ–≥–Ω–æ–∑) -->
    <div id="beliefScreen" class="screen">
        <h3 class="text-center mb-4">–†–∞—É–Ω–¥ <span id="currentRound1">1</span> –∏–∑ 5</h3>
        <h5 class="mb-4">–ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –∫–∞–∫–∏–º–∏ –±—É–¥—É—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏?</h5>
        
        <div class="d-flex flex-column gap-2">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="belief" value="60" id="b60">
                <label class="form-check-label" for="b60">60 –º–æ–Ω–µ—Ç</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="belief" value="80" id="b80">
                <label class="form-check-label" for="b80">80 –º–æ–Ω–µ—Ç</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="belief" value="100" id="b100">
                <label class="form-check-label" for="b100">100 –º–æ–Ω–µ—Ç</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="belief" value="120" id="b120">
                <label class="form-check-label" for="b120">120 –º–æ–Ω–µ—Ç</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="belief" value="140" id="b140">
                <label class="form-check-label" for="b140">140 –º–æ–Ω–µ—Ç</label>
            </div>
        </div>
        
        <button class="btn btn-primary btn-lg w-100 mt-4" onclick="submitBelief()">–î–∞–ª–µ–µ</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 4: –†–∞—É–Ω–¥ (–≤–∑–Ω–æ—Å) -->
    <div id="contributionScreen" class="screen">
        <h3 class="text-center mb-4">–†–∞—É–Ω–¥ <span id="currentRound2">1</span> –∏–∑ 5</h3>
        <p class="text-center">–í–∞—à –ø—Ä–æ–≥–Ω–æ–∑: <strong><span id="beliefDisplay">-</span> –º–æ–Ω–µ—Ç</strong></p>
        
        <h5 class="mt-4">–í–∞—à –≤–∑–Ω–æ—Å:</h5>
        <div class="slider-container">
            <input type="range" class="form-range" min="0" max="100" value="25" id="contributionSlider" oninput="updateContributionValue()">
            <div class="text-center contribution-value" id="contributionValue">25</div>
        </div>
        
        <div class="alert alert-info">
            üí° –ï—Å–ª–∏ —Å—É–º–º–∞ –≤–∑–Ω–æ—Å–æ–≤ ‚â• —Ä–µ–∞–ª—å–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏ ‚Üí –ø—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω!
        </div>
        
        <button class="btn btn-success btn-lg w-100" onclick="submitContribution()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤–∑–Ω–æ—Å</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 5: –û–∂–∏–¥–∞–Ω–∏–µ -->
    <div id="waitingScreen" class="screen">
        <h3 class="text-center mb-4">–û–∂–∏–¥–∞–Ω–∏–µ –¥—Ä—É–≥–∏—Ö –∏–≥—Ä–æ–∫–æ–≤...</h3>
        <div class="text-center mb-4">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <p class="text-center">–ò–≥—Ä–æ–∫–æ–≤ –≥–æ—Ç–æ–≤–æ: <span id="readyCount">0</span>/4</p>
        <div id="playersStatusList"></div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 6: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—É–Ω–¥–∞ -->
    <div id="resultsScreen" class="screen">
        <h3 class="text-center mb-4">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—É–Ω–¥–∞ <span id="resultsRound">1</span></h3>
        
        <div class="alert" id="resultStatus">
            <h4>–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞</h4>
            <p>–†–µ–∞–ª—å–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏: <strong><span id="actualCost">-</span> –º–æ–Ω–µ—Ç</strong></p>
            <p>–°—É–º–º–∞ –≤–∑–Ω–æ—Å–æ–≤ –≥—Ä—É–ø–ø—ã: <strong><span id="totalContribs">-</span> –º–æ–Ω–µ—Ç</strong></p>
            <p class="mb-0"><strong><span id="successStatus">-</span></strong></p>
        </div>
        
        <table class="table table-striped mt-4">
            <thead>
                <tr>
                    <th>–ò–≥—Ä–æ–∫</th>
                    <th>–ü—Ä–æ–≥–Ω–æ–∑</th>
                    <th>–í–∑–Ω–æ—Å</th>
                    <th>–í—ã–∏–≥—Ä—ã—à</th>
                    <th>–í—Å–µ–≥–æ</th>
                </tr>
            </thead>
            <tbody id="resultsTable"></tbody>
        </table>
        
        <button class="btn btn-primary btn-lg w-100 mt-3" onclick="nextRound()" id="nextRoundBtn">–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥</button>
    </div>

    <!-- –≠–∫—Ä–∞–Ω 7: –§–∏–Ω–∞–ª -->
    <div id="finalScreen" class="screen">
        <h2 class="text-center mb-4">üèÜ –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</h2>
        
        <h4>–ò—Ç–æ–≥–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞:</h4>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>–ú–µ—Å—Ç–æ</th>
                    <th>–ò–≥—Ä–æ–∫</th>
                    <th>–ò—Ç–æ–≥–æ–≤—ã–π —Å—á—ë—Ç</th>
                </tr>
            </thead>
            <tbody id="finalTable"></tbody>
        </table>
        
        <h5 class="mt-4">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—É–Ω–¥–æ–≤:</h5>
        <table class="table table-sm">
            <thead>
                <tr>
                    <th>–†–∞—É–Ω–¥</th>
                    <th>–ò–∑–¥–µ—Ä–∂–∫–∏</th>
                    <th>–°—É–º–º–∞</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                </tr>
            </thead>
            <tbody id="historyTable"></tbody>
        </table>
        
        <div class="d-grid gap-2 mt-4">
            <button class="btn btn-success btn-lg" onclick="downloadCSV()">üì• –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (CSV)</button>
            <button class="btn btn-outline-primary" onclick="location.reload()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>

    <!-- Debug –ª–æ–≥ -->
    <div class="debug-log" id="debugLog"></div>
</div>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// FIREBASE –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (–£–ñ–ï –í–°–¢–ê–í–õ–ï–ù–ê!)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const firebaseConfig = {
  apiKey: "AIzaSyBdqtRnPhfqgYJYSMR5TZucmVHTuE4WTY8",
  authDomain: "cost-sharing-game.firebaseapp.com",
  databaseURL: "https://cost-sharing-game-default-rtdb.firebaseio.com",
  projectId: "cost-sharing-game",
  storageBucket: "cost-sharing-game.firebasestorage.app",
  messagingSenderId: "882128282715",
  appId: "1:882128282715:web:2fc86b8c68cbf3ccc44b7e"
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ì–õ–û–ë–ê–õ–¨–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let roomCode = null;
let playerId = null;
let playerName = null;
let roomRef = null;
let currentBelief = null;
let isHost = false;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –£–¢–ò–õ–ò–¢–´
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function log(message) {
    console.log(`[DEBUG] ${message}`);
    const debugLog = document.getElementById('debugLog');
    if (debugLog) {
        debugLog.style.display = 'block';
        debugLog.innerHTML += `${new Date().toLocaleTimeString()}: ${message}<br>`;
        debugLog.scrollTop = debugLog.scrollHeight;
    }
}

function showScreen(screenId) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.getElementById(screenId).classList.add('active');
    log(`–ü–æ–∫–∞–∑–∞–Ω —ç–∫—Ä–∞–Ω: ${screenId}`);
}

function generateRoomCode() {
    const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
    let code = '';
    for (let i = 0; i < 6; i++) {
        code += chars[Math.floor(Math.random() * chars.length)];
    }
    return code;
}

function generatePlayerId() {
    return 'player_' + Date.now() + '_' + Math.floor(Math.random() * 10000);
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –°–û–ó–î–ê–ù–ò–ï –ò –ü–†–ò–°–û–ï–î–ò–ù–ï–ù–ò–ï –ö –ö–û–ú–ù–ê–¢–ï
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function createRoom() {
    const name = document.getElementById('playerName').value.trim();
    if (!name) {
        alert('–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è!');
        return;
    }
    
    playerName = name;
    playerId = generatePlayerId();
    roomCode = generateRoomCode();
    isHost = true;
    
    log(`–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã: ${roomCode}, –∏–≥—Ä–æ–∫: ${playerName}`);
    
    roomRef = db.ref(`rooms/${roomCode}`);
    roomRef.set({
        status: 'waiting',
        currentRound: 1,
        host: playerId,
        roundCalculated: false,
        players: {
            [playerId]: {
                name: playerName,
                ready: false,
                score: 0,
                online: true,
                joinedAt: Date.now()
            }
        }
    }).then(() => {
        setupPresence();
        listenToRoom();
        showLobby();
    });
}

function joinRoom() {
    const name = document.getElementById('playerName').value.trim();
    const code = document.getElementById('joinRoomCode').value.trim().toUpperCase();
    
    if (!name || !code) {
        alert('–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –∫–æ–¥ –∫–æ–º–Ω–∞—Ç—ã!');
        return;
    }
    
    playerName = name;
    playerId = generatePlayerId();
    roomCode = code;
    
    log(`–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ: ${roomCode}`);
    
    roomRef = db.ref(`rooms/${roomCode}`);
    roomRef.once('value').then(snapshot => {
        if (!snapshot.exists()) {
            alert('–ö–æ–º–Ω–∞—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
            return;
        }
        
        const roomData = snapshot.val();
        const playerCount = Object.keys(roomData.players || {}).length;
        
        if (playerCount >= 4) {
            alert('–ö–æ–º–Ω–∞—Ç–∞ –ø–æ–ª–Ω–∞—è (4 –∏–≥—Ä–æ–∫–∞)!');
            return;
        }
        
        roomRef.child('players').child(playerId).set({
            name: playerName,
            ready: false,
            score: 0,
            online: true,
            joinedAt: Date.now()
        }).then(() => {
            setupPresence();
            listenToRoom();
            showLobby();
        });
    });
}

function setupPresence() {
    const playerRef = roomRef.child('players').child(playerId);
    playerRef.child('online').set(true);
    playerRef.child('online').onDisconnect().set(false);
}

function showLobby() {
    document.getElementById('displayRoomCode').textContent = roomCode;
    showScreen('lobbyScreen');
}

function copyRoomCode() {
    navigator.clipboard.writeText(roomCode);
    alert('–ö–æ–¥ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!');
}

function markReady() {
    roomRef.child('players').child(playerId).update({ ready: true });
    document.getElementById('readyBtn').disabled = true;
    log('–ò–≥—Ä–æ–∫ –æ—Ç–º–µ—Ç–∏–ª—Å—è –≥–æ—Ç–æ–≤—ã–º');
}

function leaveRoom() {
    if (confirm('–ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É?')) {
        roomRef.child('players').child(playerId).remove();
        location.reload();
    }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –°–õ–£–®–ê–¢–ï–õ–¨ –ö–û–ú–ù–ê–¢–´
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function listenToRoom() {
    roomRef.on('value', snapshot => {
        if (!snapshot.exists()) return;
        
        const roomData = snapshot.val();
        log(`–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã, —Å—Ç–∞—Ç—É—Å: ${roomData.status}, —Ä–∞—É–Ω–¥: ${roomData.currentRound}`);
        
        if (roomData.status === 'waiting') {
            updateLobby(roomData);
            checkLobbyStart(roomData);
        } else if (roomData.status === 'playing') {
            handlePlayingState(roomData);
        } else if (roomData.status === 'finished') {
            showFinalResults(roomData);
        }
    });
}

function updateLobby(roomData) {
    const players = roomData.players || {};
    const playersList = document.getElementById('playersList');
    const playerCount = document.getElementById('playerCount');
    
    playerCount.textContent = Object.keys(players).length;
    
    let html = '';
    for (let pid in players) {
        const p = players[pid];
        const statusClass = p.ready ? 'ready' : (p.online ? '' : 'offline');
        const statusText = p.ready ? '‚úÖ –ì–æ—Ç–æ–≤' : (p.online ? '‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ' : 'üî¥ –û—Ñ–ª–∞–π–Ω');
        html += `<div class="player-card ${statusClass}">
            <strong>${p.name}</strong> ${statusText}
        </div>`;
    }
    playersList.innerHTML = html;
}

function checkLobbyStart(roomData) {
    const players = roomData.players || {};
    const all = Object.values(players);
    const readyCount = all.filter(p => p.ready).length;
    
    if (readyCount === all.length && all.length === 4) {
        log('–í—Å–µ –≥–æ—Ç–æ–≤—ã, —Å—Ç–∞—Ä—Ç –∏–≥—Ä—ã!');
        if (isHost) {
            roomRef.update({ status: 'playing', currentRound: 1 });
        }
    }
}

function handlePlayingState(roomData) {
    const myPlayer = roomData.players[playerId];
    
    if (!myPlayer) return;
    
    // –ï—Å–ª–∏ –µ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—É–Ω–¥–∞ (actualCost —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
    if (roomData.actualCost && roomData.roundCalculated === false) {
        showRoundResults(roomData);
        return;
    }
    
    // –ï—Å–ª–∏ —è –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª –ø—Ä–æ–≥–Ω–æ–∑
    if (myPlayer.belief === undefined) {
        document.getElementById('currentRound1').textContent = roomData.currentRound;
        showScreen('beliefScreen');
        return;
    }
    
    // –ï—Å–ª–∏ —è –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–ª –≤–∑–Ω–æ—Å
    if (myPlayer.contribution === undefined) {
        document.getElementById('currentRound2').textContent = roomData.currentRound;
        document.getElementById('beliefDisplay').textContent = myPlayer.belief;
        showScreen('contributionScreen');
        return;
    }
    
    // –ï—Å–ª–∏ —è ready, –Ω–æ –Ω–µ –≤—Å–µ
    if (myPlayer.ready) {
        showWaitingScreen(roomData);
        checkAllPlayersReady(roomData);
    }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –†–ê–£–ù–î: –ü–†–û–ì–ù–û–ó –ò –í–ó–ù–û–°
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function submitBelief() {
    const selected = document.querySelector('input[name="belief"]:checked');
    if (!selected) {
        alert('–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≥–Ω–æ–∑!');
        return;
    }
    
    currentBelief = parseInt(selected.value);
    roomRef.child('players').child(playerId).update({ belief: currentBelief });
    log(`–ü—Ä–æ–≥–Ω–æ–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: ${currentBelief}`);
}

function updateContributionValue() {
    const value = document.getElementById('contributionSlider').value;
    document.getElementById('contributionValue').textContent = value;
}

function submitContribution() {
    const contribution = parseInt(document.getElementById('contributionSlider').value);
    
    roomRef.child('players').child(playerId).update({
        contribution: contribution,
        ready: true,
        timestamp: Date.now()
    }).then(() => {
        log(`–í–∑–Ω–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω: ${contribution}`);
    });
}

function showWaitingScreen(roomData) {
    const players = roomData.players || {};
    const all = Object.values(players);
    const readyCount = all.filter(p => p.ready).length;
    
    document.getElementById('readyCount').textContent = readyCount;
    
    let html = '';
    for (let pid in players) {
        const p = players[pid];
        const status = p.ready ? '‚úÖ –ì–æ—Ç–æ–≤!' : '‚è≥ –î—É–º–∞–µ—Ç...';
        html += `<div class="player-card ${p.ready ? 'ready' : ''}">
            <strong>${p.name}</strong>: ${status}
        </div>`;
    }
    document.getElementById('playersStatusList').innerHTML = html;
    
    showScreen('waitingScreen');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –†–ê–°–ß–ï–¢ –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function checkAllPlayersReady(roomData) {
    const players = roomData.players || {};
    const all = Object.values(players);
    const readyCount = all.filter(p => p.ready && p.contribution !== undefined).length;
    
    log(`–ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏: ${readyCount}/${all.length}`);
    
    if (readyCount === all.length && all.length > 0 && !roomData.actualCost) {
        log('–í—Å–µ –≥–æ—Ç–æ–≤—ã! –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞—Å—á–µ—Ç...');
        calculateRoundResults(roomData);
    }
}

function calculateRoundResults(roomData) {
    // –ò—Å–ø–æ–ª—å–∑—É–µ–º transaction –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏
    roomRef.child('roundCalculated').transaction(current => {
        if (current === true) {
            log('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —É–∂–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω—ã');
            return current;
        }
        return true;
    }, (error, committed, snapshot) => {
        if (error) {
            log('ERROR: ' + error);
            return;
        }
        
        if (committed && snapshot.val() === true) {
            log('–ú–´ –≤—ã—á–∏—Å–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã!');
            performCalculation(roomData);
        }
    });
}

function performCalculation(roomData) {
    const players = roomData.players;
    const currentRound = roomData.currentRound;
    
    // –°–ª—É—á–∞–π–Ω—ã–µ –∏–∑–¥–µ—Ä–∂–∫–∏
    const costs = [60, 80, 100, 120, 140];
    const actualCost = costs[Math.floor(Math.random() * costs.length)];
    
    // –°—É–º–º–∏—Ä—É–µ–º –≤–∑–Ω–æ—Å—ã
    let totalContributions = 0;
    const contributions = {};
    const beliefs = {};
    
    for (let pid in players) {
        contributions[pid] = players[pid].contribution || 0;
        beliefs[pid] = players[pid].belief || 0;
        totalContributions += contributions[pid];
    }
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É—Å–ø–µ—Ö
    const success = totalContributions >= actualCost;
    
    // –°—á–∏—Ç–∞–µ–º –≤—ã–∏–≥—Ä—ã—à–∏
    const payoffs = {};
    for (let pid in players) {
        const contrib = contributions[pid];
        payoffs[pid] = success ? (50 - contrib) : (-contrib);
    }
    
    // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–∑—É
    const updates = {};
    updates.actualCost = actualCost;
    updates.totalContributions = totalContributions;
    updates.success = success;
    updates[`history/round${currentRound}`] = {
        actualCost,
        totalContributions,
        success,
        contributions,
        beliefs,
        payoffs,
        timestamp: Date.now()
    };
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç–∞ –∏–≥—Ä–æ–∫–æ–≤ –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º ready
    for (let pid in players) {
        const newScore = (players[pid].score || 0) + payoffs[pid];
        updates[`players/${pid}/score`] = newScore;
        updates[`players/${pid}/ready`] = false;
        updates[`players/${pid}/belief`] = null;
        updates[`players/${pid}/contribution`] = null;
    }
    
    // –°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥ –∏–ª–∏ —Ñ–∏–Ω–∞–ª
    if (currentRound < 5) {
        updates.currentRound = currentRound + 1;
        updates.status = 'playing';
    } else {
        updates.status = 'finished';
    }
    
    roomRef.update(updates).then(() => {
        log('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!');
        setTimeout(() => {
            roomRef.child('roundCalculated').set(false);
        }, 2000);
    });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ü–û–ö–ê–ó –†–ï–ó–£–õ–¨–¢–ê–¢–û–í
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function showRoundResults(roomData) {
    const round = roomData.currentRound - 1; // –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–π —Ä–∞—É–Ω–¥
    const history = roomData.history[`round${round}`];
    
    if (!history) return;
    
    document.getElementById('resultsRound').textContent = round;
    document.getElementById('actualCost').textContent = history.actualCost;
    document.getElementById('totalContribs').textContent = history.totalContributions;
    
    const statusDiv = document.getElementById('resultStatus');
    if (history.success) {
        statusDiv.classList.add('result-success');
        statusDiv.classList.remove('result-fail');
        document.getElementById('successStatus').textContent = '‚úÖ –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω!';
    } else {
        statusDiv.classList.add('result-fail');
        statusDiv.classList.remove('result-success');
        document.getElementById('successStatus').textContent = '‚ùå –ü—Ä–æ–µ–∫—Ç –ø—Ä–æ–≤–∞–ª–µ–Ω';
    }
    
    // –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    let tableHtml = '';
    for (let pid in roomData.players) {
        const p = roomData.players[pid];
        const contrib = history.contributions[pid] || 0;
        const belief = history.beliefs[pid] || 0;
        const payoff = history.payoffs[pid] || 0;
        
        tableHtml += `<tr>
            <td>${p.name}</td>
            <td>${belief}</td>
            <td>${contrib}</td>
            <td>${payoff > 0 ? '+' : ''}${payoff}</td>
            <td><strong>${p.score}</strong></td>
        </tr>`;
    }
    document.getElementById('resultsTable').innerHTML = tableHtml;
    
    // –ö–Ω–æ–ø–∫–∞
    const btn = document.getElementById('nextRoundBtn');
    if (roomData.currentRound > 5) {
        btn.textContent = '–§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã';
        btn.onclick = () => showFinalResults(roomData);
    } else {
        btn.textContent = '–°–ª–µ–¥—É—é—â–∏–π —Ä–∞—É–Ω–¥';
        btn.onclick = nextRound;
    }
    
    showScreen('resultsScreen');
}

function nextRound() {
    log('–ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ä–∞—É–Ω–¥—É');
    showScreen('beliefScreen');
}

function showFinalResults(roomData) {
    // –¢–∞–±–ª–∏—Ü–∞ –º–µ—Å—Ç
    const players = Object.entries(roomData.players).map(([id, p]) => ({
        name: p.name,
        score: p.score
    })).sort((a, b) => b.score - a.score);
    
    let finalHtml = '';
    players.forEach((p, i) => {
        const medal = i === 0 ? 'ü•á' : i === 1 ? 'ü•à' : i === 2 ? 'ü•â' : '';
        finalHtml += `<tr>
            <td>${medal} ${i + 1}</td>
            <td>${p.name}</td>
            <td><strong>${p.score}</strong></td>
        </tr>`;
    });
    document.getElementById('finalTable').innerHTML = finalHtml;
    
    // –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—É–Ω–¥–æ–≤
    let histHtml = '';
    for (let i = 1; i <= 5; i++) {
        const h = roomData.history[`round${i}`];
        if (h) {
            histHtml += `<tr>
                <td>${i}</td>
                <td>${h.actualCost}</td>
                <td>${h.totalContributions}</td>
                <td>${h.success ? '‚úÖ' : '‚ùå'}</td>
            </tr>`;
        }
    }
    document.getElementById('historyTable').innerHTML = histHtml;
    
    showScreen('finalScreen');
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// CSV –≠–ö–°–ü–û–†–¢
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function downloadCSV() {
    roomRef.once('value').then(snapshot => {
        const roomData = snapshot.val();
        
        let csv = 'roomCode,playerId,playerName,round,belief,contribution,actualCost,totalContributions,success,roundPayoff,totalScore\n';
        
        for (let r = 1; r <= 5; r++) {
            const h = roomData.history[`round${r}`];
            if (!h) continue;
            
            for (let pid in roomData.players) {
                const p = roomData.players[pid];
                csv += `${roomCode},${pid},${p.name},${r},${h.beliefs[pid]},${h.contributions[pid]},${h.actualCost},${h.totalContributions},${h.success},${h.payoffs[pid]},${p.score}\n`;
            }
        }
        
        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `results_${roomCode}_${playerName}.csv`;
        a.click();
    });
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
log('–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
</script>

</body>
</html>
